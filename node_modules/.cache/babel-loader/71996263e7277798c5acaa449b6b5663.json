{"ast":null,"code":"import _defineProperty from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _objectSpread from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import{Link}from'react-router-dom';import{TextField,Button,IconButton,Grid}from'@material-ui/core';import{createMuiTheme,ThemeProvider}from'@material-ui/core/styles';import Facebook from'./statics/images/Facebook.png';import Google from'./statics/images/Google.png';import GoogleLogin from'react-google-login';import FacebookLogin from'react-facebook-login/dist/facebook-login-render-props';import{ArrowBack,Person,Email,Https}from'@material-ui/icons';import{connect}from'react-redux';import axios from'axios';var theme=createMuiTheme({palette:{type:'dark'}});var Inscription=/*#__PURE__*/function(_Component){_inherits(Inscription,_Component);var _super=_createSuper(Inscription);function Inscription(props){var _this;_classCallCheck(this,Inscription);_this=_super.call(this,props);_this.state={error:false,isLoading:false,isNotCopy:false,isReq:false};return _this;}_createClass(Inscription,[{key:\"onSubmit\",value:function onSubmit(e){var _this2=this;e.preventDefault();console.log();var _this$props$inscripti=this.props.inscription.datas,name=_this$props$inscripti.name,email=_this$props$inscripti.email,password=_this$props$inscripti.password,vpassword=_this$props$inscripti.vpassword;this.setState({isNotCopy:false});if(password===vpassword){this.setState({isReq:false});var mondes=this.props.history.location.search.split('=')[1];if(name!==''&&email!==''&&password!==''&&mondes){this.setState({isLoading:true});console.log({name:name,email:email,password:password,mondes:mondes});axios.post('/api/register',{name:name,email:email,password:password,mondes:parseInt(mondes)}).then(/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref){var data;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:data=_ref.data;console.log(data);_this2.setState({isLoading:false});if(!data.token){_context.next=7;break;}_context.next=6;return localStorage.setItem('Token',JSON.stringify(data.token));case 6:_this2.props.history.push('/Authentification=MonDomicile');case 7:case\"end\":return _context.stop();}}},_callee);}));return function(_x){return _ref2.apply(this,arguments);};}()).catch(function(error){console.log({error:error});_this2.setState({isLoading:false,error:true});});}else{this.setState({isReq:true});}}else{this.setState({isNotCopy:true});}}},{key:\"redirect\",value:function(){var _redirect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(token){return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!token){_context2.next=5;break;}_context2.next=3;return localStorage.setItem('Token',JSON.stringify(token));case 3:this.props.history.push('/Authentification=MonDomicile');return _context2.abrupt(\"return\",true);case 5:return _context2.abrupt(\"return\",false);case 6:case\"end\":return _context2.stop();}}},_callee2,this);}));function redirect(_x2){return _redirect.apply(this,arguments);}return redirect;}()},{key:\"onClickFaceboookBtn\",value:function onClickFaceboookBtn(_ref3){var _this3=this;var facebookId=_ref3.userID,name=_ref3.name;var mondes=parseInt(this.props.history.location.search.split('=')[1]);var datas={facebookId:facebookId,name:name,mondes:mondes};if(facebookId&&name){console.log(facebookId,name,facebookId&&name);axios.post('/api/register/facebook',datas).then(function(_ref4){var data=_ref4.data;console.log({data:data});_this3.redirect(data.token)&&_this3.setState({error:true});}).catch(function(error){return console.log({error:error});});}}},{key:\"onClickGoogleBtn\",value:function onClickGoogleBtn(_ref5){var _this4=this;var googleId=_ref5.googleId,_ref5$profileObj=_ref5.profileObj,name=_ref5$profileObj.name,email=_ref5$profileObj.email;var mondes=parseInt(this.props.history.location.search.split('=')[1]);console.log({googleId:googleId,name:name,email:email,mondes:mondes});if(googleId&&email&&name&&mondes){var datas={googleId:googleId,email:email,name:name,mondes:mondes};axios.post('http://www.perlerencontre.fr/api/register/google',datas).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(e){var token;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:token=e.data.token;_this4.redirect(token)&&_this4.setState({error:true});case 2:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref6.apply(this,arguments);};}()).catch(function(error){return console.log({error:error});});}}},{key:\"onChangeInput\",value:function onChangeInput(e){this.setState({error:false,isReq:false});this.props.putInscription(_objectSpread(_objectSpread({},this.props.inscription.datas),{},_defineProperty({},e.target.name,e.target.value)));}},{key:\"setReturn\",value:function setReturn(){var monde=this.props.history.location.search.split('=')[1];if(monde){this.props.history.push('/Authentification=Connexion?id='+monde);}else{this.props.history.goBack();}}},{key:\"render\",value:function render(){var _this$props$inscripti2=this.props.inscription.datas,name=_this$props$inscripti2.name,email=_this$props$inscripti2.email,password=_this$props$inscripti2.password,vpassword=_this$props$inscripti2.vpassword;var _this$state=this.state,error=_this$state.error,isLoading=_this$state.isLoading,isNotCopy=_this$state.isNotCopy,isReq=_this$state.isReq;return/*#__PURE__*/React.createElement(\"div\",{className:\"Inscription\"},/*#__PURE__*/React.createElement(\"div\",{className:\"parent-space-between\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{to:\"/\",className:\"backward-round\"},\"Revenir\"))),/*#__PURE__*/React.createElement(\"h1\",{className:\"whiteSpecialTitle\"},\"Rencontre love\"),/*#__PURE__*/React.createElement(\"div\",{className:\"boxRounded dark-shadow semiOpacity\"},/*#__PURE__*/React.createElement(\"div\",{style:{position:'absolute',top:10,left:10,border:'1px solid white',borderRadius:'100%'},onClick:this.setReturn.bind(this),role:\"button\",tabIndex:\"0\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"delete\",size:\"small\"},/*#__PURE__*/React.createElement(ArrowBack,{fontSize:\"small\"}))),/*#__PURE__*/React.createElement(\"div\",{style:{width:'100%',height:30}}),/*#__PURE__*/React.createElement(\"h2\",{className:\"whiteSecondTitle centeredText\"},\"Inscription\"),/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(\"div\",{className:\"inline\",style:{display:'flex',justifyContent:'space-between'}},/*#__PURE__*/React.createElement(FacebookLogin,{render:function render(e){return/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",size:\"small\",onClick:e.onClick,style:{borderRadius:30},startIcon:/*#__PURE__*/React.createElement(\"img\",{src:Facebook,alt:\"facebook\",style:{width:20,height:20}})},\"Facebook\");},autoLoad:false,callback:this.onClickFaceboookBtn.bind(this),appId:\"1049953638795724\"}),/*#__PURE__*/React.createElement(GoogleLogin,{render:function render(e){return/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",style:{borderRadius:30},onClick:e.onClick,startIcon:/*#__PURE__*/React.createElement(\"img\",{src:Google,alt:\"google\",style:{width:20,height:20}})},\"Google\");},onSuccess:this.onClickGoogleBtn.bind(this),onFailure:this.onClickGoogleBtn.bind(this),cookiePolicy:'single_host_origin',clientId:\"771939562585-noigod9r3l0ddqmh822uki4kmefqvarl.apps.googleusercontent.com\"}))),/*#__PURE__*/React.createElement(\"h2\",{style:{color:'#afb0b2',marginTop:20}},\"- ou -\"),/*#__PURE__*/React.createElement(\"form\",null,/*#__PURE__*/React.createElement(\"ul\",{className:\"standar-vertic-spacing standar-bottom-spacing\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Person,null)),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(TextField,{label:\"Pseudo *\",value:name,error:error,onChange:this.onChangeInput.bind(this)// className=\"max-width\"\n,name:\"name\",style:{width:215}})))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Email,null)),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(TextField,{label:\"Email *\",value:email,error:error,onChange:this.onChangeInput.bind(this)// className=\"max-width\"\n,name:\"email\",style:{width:215}})))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Https,null)),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(TextField,{label:\"Mot de passe *\",type:\"password\",value:password,error:error,onChange:this.onChangeInput.bind(this),name:\"password\",style:{width:215}})))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Https,null)),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(TextField,{label:\"Confirmation *\",value:vpassword,type:\"password\",error:error,onChange:this.onChangeInput.bind(this),style:{width:215},name:\"vpassword\"})))),isNotCopy&&/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},\"Mot de pass differents\"),isReq&&/*#__PURE__*/React.createElement(\"p\",{className:\"error\"},\"* Champ obligatoire\")),/*#__PURE__*/React.createElement(\"ul\",{className:\"standar-vertic-spacing\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"input\",{style:{cursor:'pointer'},className:\"max-width btn button-light-blue\",type:\"button\",value:isLoading?'Loading...':'Inscription',onClick:this.onSubmit.bind(this)})))),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(\"li\",{className:\"centeredText small-padding \"}),/*#__PURE__*/React.createElement(\"li\",{className:\"centeredText small-padding \"},\"* Champ obligatoire\"))));}}]);return Inscription;}(Component);var mapStateToProps=function mapStateToProps(state){return{inscription:state.inscription};};var mapDispatchToProps=function mapDispatchToProps(dispatch){return{putInscription:function putInscription(datas){dispatch({type:'PUT_INSCRIPTION',datas:datas});}};};export default connect(mapStateToProps,mapDispatchToProps)(Inscription);","map":{"version":3,"sources":["/home/files/javascript/react/reactjs/tp/perle/src/components/clients/authentification/layouts/inscription/Inscription.jsx"],"names":["React","Component","Link","TextField","Button","IconButton","Grid","createMuiTheme","ThemeProvider","Facebook","Google","GoogleLogin","FacebookLogin","ArrowBack","Person","Email","Https","connect","axios","theme","palette","type","Inscription","props","state","error","isLoading","isNotCopy","isReq","e","preventDefault","console","log","inscription","datas","name","email","password","vpassword","setState","mondes","history","location","search","split","post","parseInt","then","data","token","localStorage","setItem","JSON","stringify","push","catch","facebookId","userID","redirect","googleId","profileObj","putInscription","target","value","monde","goBack","position","top","left","border","borderRadius","setReturn","bind","width","height","display","justifyContent","onClick","onClickFaceboookBtn","onClickGoogleBtn","color","marginTop","onChangeInput","cursor","onSubmit","mapStateToProps","mapDispatchToProps","dispatch"],"mappings":"8wCAAA,MAAOA,CAAAA,KAAP,EAAgBC,SAAhB,KAAiC,OAAjC,CACA,OAASC,IAAT,KAAqB,kBAArB,CAEA,OACIC,SADJ,CAEIC,MAFJ,CAGIC,UAHJ,CAIIC,IAJJ,KAKO,mBALP,CAMA,OACIC,cADJ,CAEIC,aAFJ,KAGO,0BAHP,CAKA,MAAOC,CAAAA,QAAP,KAAqB,+BAArB,CACA,MAAOC,CAAAA,MAAP,KAAmB,6BAAnB,CAEA,MAAOC,CAAAA,WAAP,KAAwB,oBAAxB,CACA,MAAOC,CAAAA,aAAP,KAA0B,uDAA1B,CAEA,OACIC,SADJ,CAEIC,MAFJ,CAGIC,KAHJ,CAIIC,KAJJ,KAKO,oBALP,CAMA,OAASC,OAAT,KAAwB,aAAxB,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CAEA,GAAMC,CAAAA,KAAK,CAAGZ,cAAc,CAAC,CACzBa,OAAO,CAAE,CACLC,IAAI,CAAE,MADD,CADgB,CAAD,CAA5B,C,GAMMC,CAAAA,W,0GACF,qBAAaC,KAAb,CAAoB,6CAChB,uBAAMA,KAAN,EACA,MAAKC,KAAL,CAAa,CACTC,KAAK,CAAE,KADE,CAETC,SAAS,CAAE,KAFF,CAGTC,SAAS,CAAE,KAHF,CAITC,KAAK,CAAE,KAJE,CAAb,CAFgB,aAQnB,C,kEAESC,C,CAAG,iBACTA,CAAC,CAACC,cAAF,GACAC,OAAO,CAACC,GAAR,GAFS,0BAQL,KAAKT,KAAL,CAAWU,WAAX,CAAuBC,KARlB,CAILC,IAJK,uBAILA,IAJK,CAKLC,KALK,uBAKLA,KALK,CAMLC,QANK,uBAMLA,QANK,CAOLC,SAPK,uBAOLA,SAPK,CAST,KAAKC,QAAL,CAAc,CAAEZ,SAAS,CAAE,KAAb,CAAd,EACA,GAAIU,QAAQ,GAAKC,SAAjB,CAA4B,CACxB,KAAKC,QAAL,CAAc,CAAEX,KAAK,CAAE,KAAT,CAAd,EACA,GAAMY,CAAAA,MAAM,CAAG,KAAKjB,KAAL,CAAWkB,OAAX,CAAmBC,QAAnB,CAA4BC,MAA5B,CAAmCC,KAAnC,CAAyC,GAAzC,EAA8C,CAA9C,CAAf,CACA,GAAIT,IAAI,GAAK,EAAT,EAAeC,KAAK,GAAK,EAAzB,EAA+BC,QAAQ,GAAK,EAA5C,EAAkDG,MAAtD,CAA8D,CAC1D,KAAKD,QAAL,CAAc,CAAEb,SAAS,CAAE,IAAb,CAAd,EACAK,OAAO,CAACC,GAAR,CAAY,CAAEG,IAAI,CAAJA,IAAF,CAAQC,KAAK,CAALA,KAAR,CAAeC,QAAQ,CAARA,QAAf,CAAyBG,MAAM,CAANA,MAAzB,CAAZ,EACAtB,KAAK,CACA2B,IADL,CACU,eADV,CAC2B,CACnBV,IAAI,CAAJA,IADmB,CAEnBC,KAAK,CAALA,KAFmB,CAGnBC,QAAQ,CAARA,QAHmB,CAInBG,MAAM,CAAEM,QAAQ,CAACN,MAAD,CAJG,CAD3B,EAOKO,IAPL,2FAOU,gJAASC,IAAT,MAASA,IAAT,CACFjB,OAAO,CAACC,GAAR,CAAYgB,IAAZ,EACA,MAAI,CAACT,QAAL,CAAc,CAAEb,SAAS,CAAE,KAAb,CAAd,EAFE,IAGEsB,IAAI,CAACC,KAHP,+CAIQC,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAeL,IAAI,CAACC,KAApB,CAA9B,CAJR,QAKE,MAAI,CAAC1B,KAAL,CAAWkB,OAAX,CAAmBa,IAAnB,CAAwB,+BAAxB,EALF,sDAPV,iEAeKC,KAfL,CAeW,SAAA9B,KAAK,CAAI,CACZM,OAAO,CAACC,GAAR,CAAY,CAAEP,KAAK,CAALA,KAAF,CAAZ,EACA,MAAI,CAACc,QAAL,CAAc,CAAEb,SAAS,CAAE,KAAb,CAAoBD,KAAK,CAAE,IAA3B,CAAd,EACH,CAlBL,EAmBH,CAtBD,IAsBO,CACH,KAAKc,QAAL,CAAc,CAAEX,KAAK,CAAE,IAAT,CAAd,EACH,CACJ,CA5BD,IA4BO,CACH,KAAKW,QAAL,CAAc,CAAEZ,SAAS,CAAE,IAAb,CAAd,EACH,CACJ,C,2HAEesB,K,0HACRA,K,iDACMC,CAAAA,YAAY,CAACC,OAAb,CAAqB,OAArB,CAA8BC,IAAI,CAACC,SAAL,CAAeJ,KAAf,CAA9B,C,QACN,KAAK1B,KAAL,CAAWkB,OAAX,CAAmBa,IAAnB,CAAwB,+BAAxB,E,iCACO,I,0CAEJ,K,0NAGwC,oBAApBE,CAAAA,UAAoB,OAA5BC,MAA4B,CAARtB,IAAQ,OAARA,IAAQ,CAC/C,GAAMK,CAAAA,MAAM,CAAGM,QAAQ,CAAC,KAAKvB,KAAL,CAAWkB,OAAX,CAAmBC,QAAnB,CAA4BC,MAA5B,CAAmCC,KAAnC,CAAyC,GAAzC,EAA8C,CAA9C,CAAD,CAAvB,CACA,GAAMV,CAAAA,KAAK,CAAG,CACVsB,UAAU,CAAVA,UADU,CAEVrB,IAAI,CAAJA,IAFU,CAGVK,MAAM,CAANA,MAHU,CAAd,CAKA,GAAIgB,UAAU,EAAIrB,IAAlB,CAAwB,CACpBJ,OAAO,CAACC,GAAR,CAAYwB,UAAZ,CAAwBrB,IAAxB,CAA8BqB,UAAU,EAAIrB,IAA5C,EACAjB,KAAK,CAAC2B,IAAN,CAAW,wBAAX,CAAqCX,KAArC,EACKa,IADL,CACU,eAAc,IAAXC,CAAAA,IAAW,OAAXA,IAAW,CAChBjB,OAAO,CAACC,GAAR,CAAY,CAAEgB,IAAI,CAAJA,IAAF,CAAZ,EACA,MAAI,CAACU,QAAL,CAAcV,IAAI,CAACC,KAAnB,GAA6B,MAAI,CAACV,QAAL,CAAc,CAAEd,KAAK,CAAE,IAAT,CAAd,CAA7B,CACH,CAJL,EAKK8B,KALL,CAKW,SAAA9B,KAAK,QAAIM,CAAAA,OAAO,CAACC,GAAR,CAAY,CAAEP,KAAK,CAALA,KAAF,CAAZ,CAAJ,EALhB,EAMH,CACJ,C,gEAE4D,oBAAzCkC,CAAAA,QAAyC,OAAzCA,QAAyC,wBAA/BC,UAA+B,CAAjBzB,IAAiB,kBAAjBA,IAAiB,CAAXC,KAAW,kBAAXA,KAAW,CACzD,GAAMI,CAAAA,MAAM,CAAGM,QAAQ,CAAC,KAAKvB,KAAL,CAAWkB,OAAX,CAAmBC,QAAnB,CAA4BC,MAA5B,CAAmCC,KAAnC,CAAyC,GAAzC,EAA8C,CAA9C,CAAD,CAAvB,CACAb,OAAO,CAACC,GAAR,CAAY,CAAE2B,QAAQ,CAARA,QAAF,CAAYxB,IAAI,CAAJA,IAAZ,CAAkBC,KAAK,CAALA,KAAlB,CAAyBI,MAAM,CAANA,MAAzB,CAAZ,EACA,GAAImB,QAAQ,EAAIvB,KAAZ,EAAqBD,IAArB,EAA6BK,MAAjC,CAAyC,CACrC,GAAMN,CAAAA,KAAK,CAAG,CACVyB,QAAQ,CAARA,QADU,CAEVvB,KAAK,CAALA,KAFU,CAGVD,IAAI,CAAJA,IAHU,CAIVK,MAAM,CAANA,MAJU,CAAd,CAMAtB,KAAK,CAAC2B,IAAN,CAAW,kDAAX,CAA+DX,KAA/D,EACKa,IADL,2FACU,kBAAOlB,CAAP,gIACcoB,KADd,CAC0BpB,CAD1B,CACMmB,IADN,CACcC,KADd,CAEF,MAAI,CAACS,QAAL,CAAcT,KAAd,GAAwB,MAAI,CAACV,QAAL,CAAc,CAAEd,KAAK,CAAE,IAAT,CAAd,CAAxB,CAFE,wDADV,kEAKK8B,KALL,CAKW,SAAA9B,KAAK,QAAIM,CAAAA,OAAO,CAACC,GAAR,CAAY,CAAEP,KAAK,CAALA,KAAF,CAAZ,CAAJ,EALhB,EAMH,CACJ,C,oDAEcI,C,CAAG,CACd,KAAKU,QAAL,CAAc,CAAEd,KAAK,CAAE,KAAT,CAAgBG,KAAK,CAAE,KAAvB,CAAd,EACA,KAAKL,KAAL,CAAWsC,cAAX,gCAA+B,KAAKtC,KAAL,CAAWU,WAAX,CAAuBC,KAAtD,wBAA8DL,CAAC,CAACiC,MAAF,CAAS3B,IAAvE,CAA8EN,CAAC,CAACiC,MAAF,CAASC,KAAvF,IACH,C,6CAEY,CACT,GAAMC,CAAAA,KAAK,CAAG,KAAKzC,KAAL,CAAWkB,OAAX,CAAmBC,QAAnB,CAA4BC,MAA5B,CAAmCC,KAAnC,CAAyC,GAAzC,EAA8C,CAA9C,CAAd,CACA,GAAIoB,KAAJ,CAAW,CACP,KAAKzC,KAAL,CAAWkB,OAAX,CAAmBa,IAAnB,CAAwB,kCAAoCU,KAA5D,EACH,CAFD,IAEO,CACH,KAAKzC,KAAL,CAAWkB,OAAX,CAAmBwB,MAAnB,GACH,CACJ,C,uCAES,4BAMF,KAAK1C,KAAL,CAAWU,WAAX,CAAuBC,KANrB,CAEFC,IAFE,wBAEFA,IAFE,CAGFC,KAHE,wBAGFA,KAHE,CAIFC,QAJE,wBAIFA,QAJE,CAKFC,SALE,wBAKFA,SALE,iBAYF,KAAKd,KAZH,CAQFC,KARE,aAQFA,KARE,CASFC,SATE,aASFA,SATE,CAUFC,SAVE,aAUFA,SAVE,CAWFC,KAXE,aAWFA,KAXE,CAaN,mBACI,2BAAK,SAAS,CAAC,aAAf,eACI,2BAAK,SAAS,CAAC,sBAAf,eACI,0CAAG,oBAAC,IAAD,EAAM,EAAE,CAAC,GAAT,CAAa,SAAS,CAAC,gBAAvB,YAAH,CADJ,CADJ,cAKI,0BAAI,SAAS,CAAC,mBAAd,mBALJ,cAOI,2BAAK,SAAS,CAAC,oCAAf,eAEI,2BACI,KAAK,CAAE,CACHsC,QAAQ,CAAE,UADP,CAEHC,GAAG,CAAE,EAFF,CAGHC,IAAI,CAAE,EAHH,CAIHC,MAAM,CAAE,iBAJL,CAKHC,YAAY,CAAE,MALX,CADX,CAQI,OAAO,CAAE,KAAKC,SAAL,CAAeC,IAAf,CAAoB,IAApB,CARb,CASI,IAAI,CAAC,QATT,CAUI,QAAQ,CAAC,GAVb,eAYI,oBAAC,UAAD,EAAY,aAAW,QAAvB,CAAgC,IAAI,CAAC,OAArC,eACI,oBAAC,SAAD,EAAW,QAAQ,CAAC,OAApB,EADJ,CAZJ,CAFJ,cAkBI,2BACI,KAAK,CAAE,CACHC,KAAK,CAAE,MADJ,CAEHC,MAAM,CAAE,EAFL,CADX,EAlBJ,cAyBI,0BAAI,SAAS,CAAC,+BAAd,gBAzBJ,cA0BI,oBAAC,aAAD,EAAe,KAAK,CAAEvD,KAAtB,eACI,2BACI,SAAS,CAAC,QADd,CAEI,KAAK,CAAE,CACHwD,OAAO,CAAE,MADN,CAEHC,cAAc,CAAE,eAFb,CAFX,eAOI,oBAAC,aAAD,EACI,MAAM,CAAE,gBAAA/C,CAAC,qBACL,oBAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,SAFV,CAGI,IAAI,CAAC,OAHT,CAII,OAAO,CAAEA,CAAC,CAACgD,OAJf,CAKI,KAAK,CAAE,CAAEP,YAAY,CAAE,EAAhB,CALX,CAMI,SAAS,cAAE,2BAAK,GAAG,CAAE7D,QAAV,CAAoB,GAAG,CAAC,UAAxB,CAAmC,KAAK,CAAE,CAAEgE,KAAK,CAAE,EAAT,CAAaC,MAAM,CAAE,EAArB,CAA1C,EANf,aADK,EADb,CAaI,QAAQ,CAAE,KAbd,CAcI,QAAQ,CAAE,KAAKI,mBAAL,CAAyBN,IAAzB,CAA8B,IAA9B,CAdd,CAeI,KAAK,CAAC,kBAfV,EAPJ,cAwBI,oBAAC,WAAD,EACI,MAAM,CAAE,gBAAA3C,CAAC,qBACL,oBAAC,MAAD,EACI,OAAO,CAAC,WADZ,CAEI,KAAK,CAAC,WAFV,CAGI,IAAI,CAAC,OAHT,CAII,KAAK,CAAE,CAAEyC,YAAY,CAAE,EAAhB,CAJX,CAKI,OAAO,CAAEzC,CAAC,CAACgD,OALf,CAMI,SAAS,cAAG,2BAAK,GAAG,CAAEnE,MAAV,CAAkB,GAAG,CAAC,QAAtB,CAA+B,KAAK,CAAE,CAAE+D,KAAK,CAAE,EAAT,CAAaC,MAAM,CAAE,EAArB,CAAtC,EANhB,WADK,EADb,CAaI,SAAS,CAAE,KAAKK,gBAAL,CAAsBP,IAAtB,CAA2B,IAA3B,CAbf,CAcI,SAAS,CAAE,KAAKO,gBAAL,CAAsBP,IAAtB,CAA2B,IAA3B,CAdf,CAeI,YAAY,CAAE,oBAflB,CAgBI,QAAQ,CAAC,0EAhBb,EAxBJ,CADJ,CA1BJ,cAuEI,0BAAI,KAAK,CAAE,CAAEQ,KAAK,CAAE,SAAT,CAAoBC,SAAS,CAAE,EAA/B,CAAX,WAvEJ,cAwEI,6CACI,0BAAI,SAAS,CAAC,+CAAd,eACI,2CACI,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,UAAU,CAAC,UAAvC,eACI,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,MAAD,MADJ,CADJ,cAII,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,SAAD,EACI,KAAK,CAAC,UADV,CAEI,KAAK,CAAE9C,IAFX,CAGI,KAAK,CAAEV,KAHX,CAII,QAAQ,CAAE,KAAKyD,aAAL,CAAmBV,IAAnB,CAAwB,IAAxB,CACV;AALJ,CAMI,IAAI,CAAC,MANT,CAOI,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAT,CAPX,EADJ,CAJJ,CADJ,CADJ,cAmBI,2CACI,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,UAAU,CAAC,UAAvC,eACI,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,KAAD,MADJ,CADJ,cAII,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,SAAD,EACI,KAAK,CAAC,SADV,CAEI,KAAK,CAAErC,KAFX,CAGI,KAAK,CAAEX,KAHX,CAII,QAAQ,CAAE,KAAKyD,aAAL,CAAmBV,IAAnB,CAAwB,IAAxB,CACV;AALJ,CAMI,IAAI,CAAC,OANT,CAOI,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAT,CAPX,EADJ,CAJJ,CADJ,CAnBJ,cAqCI,2CACI,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,UAAU,CAAC,UAAvC,eACI,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,KAAD,MADJ,CADJ,cAII,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,SAAD,EACI,KAAK,CAAC,gBADV,CAEI,IAAI,CAAC,UAFT,CAGI,KAAK,CAAEpC,QAHX,CAII,KAAK,CAAEZ,KAJX,CAKI,QAAQ,CAAE,KAAKyD,aAAL,CAAmBV,IAAnB,CAAwB,IAAxB,CALd,CAMI,IAAI,CAAC,UANT,CAOI,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAT,CAPX,EADJ,CAJJ,CADJ,CArCJ,cAuDI,2CACI,oBAAC,IAAD,EAAM,SAAS,KAAf,CAAgB,OAAO,CAAE,CAAzB,CAA4B,UAAU,CAAC,UAAvC,eACI,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,KAAD,MADJ,CADJ,cAII,oBAAC,IAAD,EAAM,IAAI,KAAV,eACI,oBAAC,SAAD,EACI,KAAK,CAAC,gBADV,CAEI,KAAK,CAAEnC,SAFX,CAGI,IAAI,CAAC,UAHT,CAII,KAAK,CAAEb,KAJX,CAKI,QAAQ,CAAE,KAAKyD,aAAL,CAAmBV,IAAnB,CAAwB,IAAxB,CALd,CAMI,KAAK,CAAE,CAAEC,KAAK,CAAE,GAAT,CANX,CAOI,IAAI,CAAC,WAPT,EADJ,CAJJ,CADJ,CAvDJ,CAyEK9C,SAAS,eAAI,yBAAG,SAAS,CAAC,OAAb,2BAzElB,CA0EKC,KAAK,eAAI,yBAAG,SAAS,CAAC,OAAb,wBA1Ed,CADJ,cA6EI,0BAAI,SAAS,CAAC,wBAAd,eACI,2CACI,6BACI,KAAK,CAAE,CAAEuD,MAAM,CAAE,SAAV,CADX,CAEI,SAAS,CAAC,iCAFd,CAGI,IAAI,CAAC,QAHT,CAII,KAAK,CAAEzD,SAAS,CAAG,YAAH,CAAkB,aAJtC,CAKI,OAAO,CAAE,KAAK0D,QAAL,CAAcZ,IAAd,CAAmB,IAAnB,CALb,EADJ,CADJ,CA7EJ,CAxEJ,cAiKI,4CACI,0BAAI,SAAS,CAAC,6BAAd,EADJ,cAEI,0BAAI,SAAS,CAAC,6BAAd,wBAFJ,CAjKJ,CAPJ,CADJ,CA+KH,C,yBA9SqBvE,S,EAiT1B,GAAMoF,CAAAA,eAAe,CAAG,QAAlBA,CAAAA,eAAkB,CAAA7D,KAAK,CAAI,CAC7B,MAAO,CACHS,WAAW,CAAET,KAAK,CAACS,WADhB,CAAP,CAGH,CAJD,CAMA,GAAMqD,CAAAA,kBAAkB,CAAG,QAArBA,CAAAA,kBAAqB,CAAAC,QAAQ,CAAI,CACnC,MAAO,CACH1B,cAAc,CAAE,wBAAC3B,KAAD,CAAW,CACvBqD,QAAQ,CAAC,CAAElE,IAAI,CAAE,iBAAR,CAA2Ba,KAAK,CAALA,KAA3B,CAAD,CAAR,CACH,CAHE,CAAP,CAKH,CAND,CAQA,cAAejB,CAAAA,OAAO,CAACoE,eAAD,CAAkBC,kBAAlB,CAAP,CAA6ChE,WAA7C,CAAf","sourcesContent":["import React, { Component } from 'react'\nimport { Link } from 'react-router-dom'\n\nimport {\n    TextField,\n    Button,\n    IconButton,\n    Grid\n} from '@material-ui/core'\nimport {\n    createMuiTheme,\n    ThemeProvider\n} from '@material-ui/core/styles'\n\nimport Facebook from './statics/images/Facebook.png'\nimport Google from './statics/images/Google.png'\n\nimport GoogleLogin from 'react-google-login'\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\n\nimport {\n    ArrowBack,\n    Person,\n    Email,\n    Https\n} from '@material-ui/icons'\nimport { connect } from 'react-redux'\nimport axios from 'axios'\n\nconst theme = createMuiTheme({\n    palette: {\n        type: 'dark'\n    }\n})\n\nclass Inscription extends Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            error: false,\n            isLoading: false,\n            isNotCopy: false,\n            isReq: false\n        }\n    }\n\n    onSubmit (e) {\n        e.preventDefault()\n        console.log()\n        const {\n            name,\n            email,\n            password,\n            vpassword\n        } = this.props.inscription.datas\n        this.setState({ isNotCopy: false })\n        if (password === vpassword) {\n            this.setState({ isReq: false })\n            const mondes = this.props.history.location.search.split('=')[1]\n            if (name !== '' && email !== '' && password !== '' && mondes) {\n                this.setState({ isLoading: true })\n                console.log({ name, email, password, mondes })\n                axios\n                    .post('/api/register', {\n                        name,\n                        email,\n                        password,\n                        mondes: parseInt(mondes)\n                    })\n                    .then(async ({ data }) => {\n                        console.log(data)\n                        this.setState({ isLoading: false })\n                        if (data.token) {\n                            await localStorage.setItem('Token', JSON.stringify(data.token))\n                            this.props.history.push('/Authentification=MonDomicile')\n                        }\n                    })\n                    .catch(error => {\n                        console.log({ error })\n                        this.setState({ isLoading: false, error: true })\n                    })\n            } else {\n                this.setState({ isReq: true })\n            }\n        } else {\n            this.setState({ isNotCopy: true })\n        }\n    }\n\n    async redirect (token) {\n        if (token) {\n            await localStorage.setItem('Token', JSON.stringify(token))\n            this.props.history.push('/Authentification=MonDomicile')\n            return true\n        }\n        return false\n    }\n\n    onClickFaceboookBtn ({ userID: facebookId, name }) {\n        const mondes = parseInt(this.props.history.location.search.split('=')[1])\n        const datas = {\n            facebookId,\n            name,\n            mondes\n        }\n        if (facebookId && name) {\n            console.log(facebookId, name, facebookId && name)\n            axios.post('/api/register/facebook', datas)\n                .then(({ data }) => {\n                    console.log({ data })\n                    this.redirect(data.token) && this.setState({ error: true })\n                })\n                .catch(error => console.log({ error }))\n        }\n    }\n\n    onClickGoogleBtn ({ googleId, profileObj: { name, email } }) {\n        const mondes = parseInt(this.props.history.location.search.split('=')[1])\n        console.log({ googleId, name, email, mondes })\n        if (googleId && email && name && mondes) {\n            const datas = {\n                googleId,\n                email,\n                name,\n                mondes\n            }\n            axios.post('http://www.perlerencontre.fr/api/register/google', datas)\n                .then(async (e) => {\n                    const { data: { token } } = e\n                    this.redirect(token) && this.setState({ error: true })\n                })\n                .catch(error => console.log({ error }))\n        }\n    }\n\n    onChangeInput (e) {\n        this.setState({ error: false, isReq: false })\n        this.props.putInscription({ ...this.props.inscription.datas, [e.target.name]: e.target.value })\n    }\n\n    setReturn () {\n        const monde = this.props.history.location.search.split('=')[1]\n        if (monde) {\n            this.props.history.push('/Authentification=Connexion?id=' + monde)\n        } else {\n            this.props.history.goBack()\n        }\n    }\n\n    render () {\n        const {\n            name,\n            email,\n            password,\n            vpassword\n        } = this.props.inscription.datas\n        const {\n            error,\n            isLoading,\n            isNotCopy,\n            isReq\n        } = this.state\n        return (\n            <div className='Inscription'>\n                <div className=\"parent-space-between\">\n                    <p><Link to='/' className=\"backward-round\">Revenir</Link></p>\n                </div>\n\n                <h1 className=\"whiteSpecialTitle\">Rencontre love</h1>\n\n                <div className=\"boxRounded dark-shadow semiOpacity\">\n                    {/* eslint-disable-next-line */}\n                    <div\n                        style={{\n                            position: 'absolute',\n                            top: 10,\n                            left: 10,\n                            border: '1px solid white',\n                            borderRadius: '100%'\n                        }}\n                        onClick={this.setReturn.bind(this)}\n                        role=\"button\"\n                        tabIndex=\"0\"\n                    >\n                        <IconButton aria-label=\"delete\" size=\"small\" >\n                            <ArrowBack fontSize=\"small\" />\n                        </IconButton>\n                    </div>\n                    <div\n                        style={{\n                            width: '100%',\n                            height: 30\n                        }}\n                    >\n                    </div>\n                    <h2 className=\"whiteSecondTitle centeredText\">Inscription</h2>\n                    <ThemeProvider theme={theme}>\n                        <div\n                            className=\"inline\"\n                            style={{\n                                display: 'flex',\n                                justifyContent: 'space-between'\n                            }}\n                        >\n                            <FacebookLogin\n                                render={e => (\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"primary\"\n                                        size=\"small\"\n                                        onClick={e.onClick}\n                                        style={{ borderRadius: 30 }}\n                                        startIcon={<img src={Facebook} alt='facebook' style={{ width: 20, height: 20 }} />}\n                                    >\n                                      Facebook\n                                    </Button>\n                                )}\n                                autoLoad={false}\n                                callback={this.onClickFaceboookBtn.bind(this)}\n                                appId=\"1049953638795724\"\n                            />\n                            <GoogleLogin\n                                render={e => (\n                                    <Button\n                                        variant=\"contained\"\n                                        color=\"secondary\"\n                                        size=\"small\"\n                                        style={{ borderRadius: 30 }}\n                                        onClick={e.onClick}\n                                        startIcon={ <img src={Google} alt='google' style={{ width: 20, height: 20 }}/> }\n                                    >\n                                      Google\n                                    </Button>\n                                )}\n                                onSuccess={this.onClickGoogleBtn.bind(this)}\n                                onFailure={this.onClickGoogleBtn.bind(this)}\n                                cookiePolicy={'single_host_origin'}\n                                clientId=\"771939562585-noigod9r3l0ddqmh822uki4kmefqvarl.apps.googleusercontent.com\"\n                            />\n                        </div>\n                    </ThemeProvider>\n                    <h2 style={{ color: '#afb0b2', marginTop: 20 }}>- ou -</h2>\n                    <form>\n                        <ul className=\"standar-vertic-spacing standar-bottom-spacing\">\n                            <li>\n                                <Grid container spacing={1} alignItems=\"flex-end\">\n                                    <Grid item>\n                                        <Person />\n                                    </Grid>\n                                    <Grid item>\n                                        <TextField\n                                            label=\"Pseudo *\"\n                                            value={name}\n                                            error={error}\n                                            onChange={this.onChangeInput.bind(this)}\n                                            // className=\"max-width\"\n                                            name='name'\n                                            style={{ width: 215 }}\n                                        />\n                                    </Grid>\n                                </Grid>\n                            </li>\n                            <li>\n                                <Grid container spacing={1} alignItems=\"flex-end\">\n                                    <Grid item>\n                                        <Email />\n                                    </Grid>\n                                    <Grid item>\n                                        <TextField\n                                            label=\"Email *\"\n                                            value={email}\n                                            error={error}\n                                            onChange={this.onChangeInput.bind(this)}\n                                            // className=\"max-width\"\n                                            name='email'\n                                            style={{ width: 215 }}\n                                        />\n                                    </Grid>\n                                </Grid>\n                            </li>\n                            <li>\n                                <Grid container spacing={1} alignItems=\"flex-end\">\n                                    <Grid item>\n                                        <Https />\n                                    </Grid>\n                                    <Grid item>\n                                        <TextField\n                                            label=\"Mot de passe *\"\n                                            type=\"password\"\n                                            value={password}\n                                            error={error}\n                                            onChange={this.onChangeInput.bind(this)}\n                                            name='password'\n                                            style={{ width: 215 }}\n                                        />\n                                    </Grid>\n                                </Grid>\n                            </li>\n                            <li>\n                                <Grid container spacing={1} alignItems=\"flex-end\">\n                                    <Grid item>\n                                        <Https />\n                                    </Grid>\n                                    <Grid item>\n                                        <TextField\n                                            label=\"Confirmation *\"\n                                            value={vpassword}\n                                            type=\"password\"\n                                            error={error}\n                                            onChange={this.onChangeInput.bind(this)}\n                                            style={{ width: 215 }}\n                                            name='vpassword'\n                                        />\n                                    </Grid>\n                                </Grid>\n                            </li>\n                            {isNotCopy && <p className='error'>Mot de pass differents</p>}\n                            {isReq && <p className='error'>* Champ obligatoire</p>}\n                        </ul>\n                        <ul className=\"standar-vertic-spacing\">\n                            <li>\n                                <input\n                                    style={{ cursor: 'pointer' }}\n                                    className=\"max-width btn button-light-blue\"\n                                    type=\"button\"\n                                    value={isLoading ? 'Loading...' : 'Inscription'}\n                                    onClick={this.onSubmit.bind(this)}\n                                />\n                            </li>\n                        </ul>\n                    </form>\n                    <div>\n                        <li className=\"centeredText small-padding \"></li>\n                        <li className=\"centeredText small-padding \">* Champ obligatoire</li>\n                    </div>\n                </div>\n            </div>)\n    }\n}\n\nconst mapStateToProps = state => {\n    return {\n        inscription: state.inscription\n    }\n}\n\nconst mapDispatchToProps = dispatch => {\n    return {\n        putInscription: (datas) => {\n            dispatch({ type: 'PUT_INSCRIPTION', datas })\n        }\n    }\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Inscription)\n"]},"metadata":{},"sourceType":"module"}