{"ast":null,"code":"var once = require('once');\n\nvar o = require('obj');\n\nmodule.exports = getPosition;\n\nfunction getPosition(opts, fn) {\n  if (arguments.length == 1) {\n    fn = opts;\n    opts = {};\n  }\n\n  fn = once(fn);\n  unlessDefined(opts, {\n    timeout: 5000,\n    maximumAge: 60000,\n    enableHighAccuracy: true\n  });\n  navigator.geolocation.getCurrentPosition(onposition, fn, opts);\n\n  function onposition(position) {\n    fn(null, o(position.coords).clone().set('timestamp', position.timestamp).get());\n  }\n\n  ;\n}\n\nfunction unlessDefined(base, xtend) {\n  o(xtend).each(function (key, value) {\n    if (typeof base[key] == 'undefined') base[key] = value;\n  });\n}","map":null,"metadata":{},"sourceType":"script"}