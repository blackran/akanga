{"ast":null,"code":"import _defineProperty from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/defineProperty\";import _regeneratorRuntime from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/regenerator\";import _asyncToGenerator from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";import _classCallCheck from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/classCallCheck\";import _createClass from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createClass\";import _inherits from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/inherits\";import _createSuper from\"/home/files/javascript/react/reactjs/tp/perle/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/createSuper\";import React,{Component}from'react';import axios from'axios';import{Link}from'react-router-dom';import{TextField,InputLabel,IconButton,InputAdornment,Button,Grid,FormControl,Input}from'@material-ui/core';import{createMuiTheme,ThemeProvider}from'@material-ui/core/styles';import{Visibility,VisibilityOff,Person,Https}from'@material-ui/icons';import{CircleLoader as Loader}from'react-spinners';import Facebook from'./statics/images/Facebook.png';import Google from'./statics/images/Google.png';import GoogleLogin from'react-google-login';import FacebookLogin from'react-facebook-login/dist/facebook-login-render-props';var theme=createMuiTheme({palette:{type:'dark'}});var Connexion=/*#__PURE__*/function(_Component){_inherits(Connexion,_Component);var _super=_createSuper(Connexion);function Connexion(props){var _this;_classCallCheck(this,Connexion);_this=_super.call(this,props);_this.state={email:'',password:'',error:false,isLoading:false,isShow:false,isOblige:false,isLoadingG:false,isLoadingF:false};return _this;}_createClass(Connexion,[{key:\"onClickPushInscription\",value:function onClickPushInscription(){var monde=this.props.history.location.search.split('=')[1];if(monde){this.props.history.push('/Authentification=Inscription?id='+monde);}}},{key:\"redirect\",value:function(){var _redirect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(token){return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:if(!token){_context.next=5;break;}_context.next=3;return localStorage.setItem('Token',JSON.stringify(token));case 3:this.props.history.push('/Profiles');return _context.abrupt(\"return\",true);case 5:return _context.abrupt(\"return\",false);case 6:case\"end\":return _context.stop();}}},_callee,this);}));function redirect(_x){return _redirect.apply(this,arguments);}return redirect;}()},{key:\"onClickFaceboookBtn\",value:function onClickFaceboookBtn(_ref){var _this2=this;var facebookId=_ref.userID,name=_ref.name;var mondes=parseInt(this.props.history.location.search.split('=')[1]);var datas={facebookId:facebookId,name:name,mondes:mondes};if(facebookId&&name){console.log(facebookId,name,facebookId&&name);axios.post('/api/register/facebook',datas).then(function(_ref2){var data=_ref2.data;_this2.setState({isLoadingG:false});console.log({data:data});_this2.redirect(data.token)&&_this2.setState({error:true});}).catch(function(error){_this2.setState({isLoadingG:false});console.log({error:error});});}}},{key:\"onClickGoogleBtn\",value:function onClickGoogleBtn(value){var _this3=this;console.log('arrive ici',value);var googleId=value.googleId,_value$profileObj=value.profileObj,name=_value$profileObj.name,email=_value$profileObj.email;var mondes=parseInt(this.props.history.location.search.split('=')[1]);var datas={googleId:googleId,email:email,name:name,mondes:mondes};axios.post('/api/register/google',datas).then(/*#__PURE__*/function(){var _ref4=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee2(_ref3){var data;return _regeneratorRuntime.wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:data=_ref3.data;console.log(data);_this3.setState({isLoadingG:false});_this3.redirect(data.token)&&_this3.setState({error:true});case 4:case\"end\":return _context2.stop();}}},_callee2);}));return function(_x2){return _ref4.apply(this,arguments);};}()).catch(function(error){_this3.setState({isLoadingG:false});console.log({error:error});});}},{key:\"onSubmit\",value:function onSubmit(e){var _this4=this;e.preventDefault();var _this$state=this.state,email=_this$state.email,password=_this$state.password;this.setState({isLoading:true,isOblige:false,error:false});if(email!==''&&password!==''){axios.post('/api/login',{email:email,password:password}).then(/*#__PURE__*/function(){var _ref6=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee3(_ref5){var token;return _regeneratorRuntime.wrap(function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:token=_ref5.data.token;_this4.setState({isLoading:false});if(!token){_context3.next=8;break;}_context3.next=5;return localStorage.setItem('Token',JSON.stringify(token));case 5:_this4.props.history.push('/Profiles');_context3.next=9;break;case 8:_this4.setState({error:true});case 9:case\"end\":return _context3.stop();}}},_callee3);}));return function(_x3){return _ref6.apply(this,arguments);};}()).catch(function(e){_this4.setState({isLoading:false,error:true});});}else{this.setState({isLoading:false,isOblige:true});}}},{key:\"onChangeInput\",value:function onChangeInput(e){var _this$setState;this.setState((_this$setState={},_defineProperty(_this$setState,e.target.name,e.target.value),_defineProperty(_this$setState,\"error\",false),_defineProperty(_this$setState,\"isOblige\",false),_this$setState));}},{key:\"render\",value:function render(){var _this5=this;var _this$state2=this.state,error=_this$state2.error,isLoading=_this$state2.isLoading,email=_this$state2.email,password=_this$state2.password,isShow=_this$state2.isShow,isOblige=_this$state2.isOblige,isLoadingF=_this$state2.isLoadingF,isLoadingG=_this$state2.isLoadingG;return/*#__PURE__*/React.createElement(\"div\",{className:\"Connection\"},/*#__PURE__*/React.createElement(\"div\",{className:\"parent-space-between\"},/*#__PURE__*/React.createElement(\"p\",null,/*#__PURE__*/React.createElement(Link,{className:\"backward-round\",to:\"/\"},\"Revenir\"))),/*#__PURE__*/React.createElement(\"h1\",{className:\"whiteSpecialTitle\"},\"Rencontre love\"),/*#__PURE__*/React.createElement(\"div\",{className:\"boxRounded dark-shadow semiOpacity\"},/*#__PURE__*/React.createElement(\"h2\",{className:\"whiteSecondTitle centeredText\"},\"Connexion\"),/*#__PURE__*/React.createElement(ThemeProvider,{theme:theme},/*#__PURE__*/React.createElement(\"div\",{className:\"inline\",style:{display:'flex',justifyContent:'space-between',flex:1}},/*#__PURE__*/React.createElement(\"div\",{style:{flex:1,marginRight:3},onClick:function onClick(){return _this5.setState({isLoadingF:true});}},/*#__PURE__*/React.createElement(FacebookLogin,{render:function render(e){return/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",size:\"small\",onClick:e.onClick,style:{borderRadius:30},startIcon:/*#__PURE__*/React.createElement(\"img\",{src:Facebook,alt:\"facebook\",style:{width:20,height:20}}),fullWidth:true},isLoadingF?/*#__PURE__*/React.createElement(Loader,{size:22,color:\"#fff\",loading:true}):'Facebook');},autoLoad:false,callback:this.onClickFaceboookBtn.bind(this),appId:\"385906195896536\"})),/*#__PURE__*/React.createElement(\"div\",{style:{flex:1,marginLeft:3},onClick:function onClick(){return _this5.setState({isLoadingG:true});}},/*#__PURE__*/React.createElement(GoogleLogin,{render:function render(e){return/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"secondary\",size:\"small\",style:{borderRadius:30},onClick:e.onClick,startIcon:/*#__PURE__*/React.createElement(\"img\",{src:Google,alt:\"google\",style:{width:20,height:20}}),fullWidth:true},isLoadingG?/*#__PURE__*/React.createElement(Loader,{size:22,color:\"#fff\",loading:true}):'Google');},onSuccess:function onSuccess(){return _this5.onClickGoogleBtn.bind(_this5);},onFailure:this.onClickGoogleBtn.bind(this),cookiePolicy:'single_host_origin',clientId:\"771939562585-noigod9r3l0ddqmh822uki4kmefqvarl.apps.googleusercontent.com\"})))),/*#__PURE__*/React.createElement(\"h2\",{style:{color:'#afb0b2',marginTop:20}},\"- ou -\"),/*#__PURE__*/React.createElement(\"form\",{className:\"margin-tb-20\"},/*#__PURE__*/React.createElement(\"ul\",{className:\"standar-vertic-spacing standar-bottom-spacing\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Person,null)),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(TextField,{label:\"Email *\",value:email,error:isOblige||error,onChange:this.onChangeInput.bind(this)// className=\"max-width\"\n,name:\"email\",style:{width:215}})))),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(Grid,{container:true,spacing:1,alignItems:\"flex-end\"},/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(Https,null)),/*#__PURE__*/React.createElement(Grid,{item:true},/*#__PURE__*/React.createElement(FormControl,null,/*#__PURE__*/React.createElement(InputLabel,{htmlFor:\"outlined-adornment-password\"},\"Mot de passe\"),/*#__PURE__*/React.createElement(Input,{type:isShow?'text':'password',value:password,onChange:this.onChangeInput.bind(this),name:\"password\",error:isOblige||error,endAdornment:/*#__PURE__*/React.createElement(InputAdornment,{position:\"end\"},/*#__PURE__*/React.createElement(IconButton,{\"aria-label\":\"toggle password visibility\",onClick:function onClick(){return _this5.setState({isShow:!isShow});},onMouseDown:function onMouseDown(){return _this5.setState({isShow:!isShow});},edge:\"end\"},isShow?/*#__PURE__*/React.createElement(Visibility,null):/*#__PURE__*/React.createElement(VisibilityOff,null))),labelWidth:70})))))),/*#__PURE__*/React.createElement(\"p\",{style:{textAlign:'left',cursor:'pointer',marginBottom:10,color:'#15c2cf'}},\"Mot de passe oubli\\xE9 ?\"),/*#__PURE__*/React.createElement(\"ul\",{className:\"standar-vertic-spacing\"},/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"input\",{style:{cursor:'pointer'},className:\"max-width btn button-light-blue\",type:\"button\",value:isLoading?'Chargement...':'Connexion',onClick:this.onSubmit.bind(this)})),/*#__PURE__*/React.createElement(\"li\",null,/*#__PURE__*/React.createElement(\"input\",{style:{cursor:'pointer'},className:\"max-width btn btn-light-border-only\",type:\"button\",value:\"Inscription\",onClick:this.onClickPushInscription.bind(this)}))))));}}]);return Connexion;}(Component);export default Connexion;","map":{"version":3,"sources":["/home/files/javascript/react/reactjs/tp/perle/src/components/clients/authentification/layouts/connection/Connection.jsx"],"names":["React","Component","axios","Link","TextField","InputLabel","IconButton","InputAdornment","Button","Grid","FormControl","Input","createMuiTheme","ThemeProvider","Visibility","VisibilityOff","Person","Https","CircleLoader","Loader","Facebook","Google","GoogleLogin","FacebookLogin","theme","palette","type","Connexion","props","state","email","password","error","isLoading","isShow","isOblige","isLoadingG","isLoadingF","monde","history","location","search","split","push","token","localStorage","setItem","JSON","stringify","facebookId","userID","name","mondes","parseInt","datas","console","log","post","then","data","setState","redirect","catch","value","googleId","profileObj","e","preventDefault","target","display","justifyContent","flex","marginRight","onClick","borderRadius","width","height","onClickFaceboookBtn","bind","marginLeft","onClickGoogleBtn","color","marginTop","onChangeInput","textAlign","cursor","marginBottom","onSubmit","onClickPushInscription"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\nimport axios from 'axios'\nimport { Link } from 'react-router-dom'\nimport {\n    TextField,\n    InputLabel,\n    IconButton,\n    InputAdornment,\n    Button,\n    Grid,\n    FormControl,\n    Input\n} from '@material-ui/core'\nimport {\n    createMuiTheme,\n    ThemeProvider\n} from '@material-ui/core/styles'\n\nimport {\n    Visibility,\n    VisibilityOff,\n    Person,\n    Https\n} from '@material-ui/icons'\n\nimport { CircleLoader as Loader } from 'react-spinners'\n\nimport Facebook from './statics/images/Facebook.png'\nimport Google from './statics/images/Google.png'\n\nimport GoogleLogin from 'react-google-login'\nimport FacebookLogin from 'react-facebook-login/dist/facebook-login-render-props'\n\nconst theme = createMuiTheme({\n    palette: {\n        type: 'dark'\n    }\n})\n\nclass Connexion extends Component {\n    constructor (props) {\n        super(props)\n        this.state = {\n            email: '',\n            password: '',\n            error: false,\n            isLoading: false,\n            isShow: false,\n            isOblige: false,\n            isLoadingG: false,\n            isLoadingF: false\n        }\n    }\n\n    onClickPushInscription () {\n        const monde = this.props.history.location.search.split('=')[1]\n        if (monde) {\n            this.props.history.push('/Authentification=Inscription?id=' + monde)\n        }\n    }\n\n    async redirect (token) {\n        if (token) {\n            await localStorage.setItem('Token', JSON.stringify(token))\n            this.props.history.push('/Profiles')\n            return true\n        }\n        return false\n    }\n\n    onClickFaceboookBtn ({ userID: facebookId, name }) {\n        const mondes = parseInt(this.props.history.location.search.split('=')[1])\n        const datas = {\n            facebookId,\n            name,\n            mondes\n        }\n        if (facebookId && name) {\n            console.log(facebookId, name, facebookId && name)\n            axios.post('/api/register/facebook', datas)\n                .then(({ data }) => {\n                    this.setState({ isLoadingG: false })\n                    console.log({ data })\n                    this.redirect(data.token) && this.setState({ error: true })\n                })\n                .catch(error => {\n                    this.setState({ isLoadingG: false })\n                    console.log({ error })\n                })\n        }\n    }\n\n    onClickGoogleBtn (value) {\n        console.log('arrive ici', value)\n        const { googleId, profileObj: { name, email } } = value\n        const mondes = parseInt(this.props.history.location.search.split('=')[1])\n        const datas = {\n            googleId,\n            email,\n            name,\n            mondes\n        }\n        axios.post('/api/register/google', datas)\n            .then(async ({ data }) => {\n                console.log(data)\n                this.setState({ isLoadingG: false })\n                this.redirect(data.token) && this.setState({ error: true })\n            })\n            .catch(error => {\n                this.setState({ isLoadingG: false })\n                console.log({ error })\n            })\n    }\n\n    onSubmit (e) {\n        e.preventDefault()\n        const {\n            email,\n            password\n        } = this.state\n        this.setState({ isLoading: true, isOblige: false, error: false })\n        if (email !== '' && password !== '') {\n            axios\n                .post('/api/login', {\n                    email,\n                    password\n                })\n                .then(async ({ data: { token } }) => {\n                    this.setState({ isLoading: false })\n                    if (token) {\n                        await localStorage.setItem('Token', JSON.stringify(token))\n                        this.props.history.push('/Profiles')\n                    } else {\n                        this.setState({ error: true })\n                    }\n                })\n                .catch(e => {\n                    this.setState({ isLoading: false, error: true })\n                })\n        } else {\n            this.setState({ isLoading: false, isOblige: true })\n        }\n    }\n\n    onChangeInput (e) {\n        this.setState({ [e.target.name]: e.target.value, error: false, isOblige: false })\n    }\n\n    render () {\n        const {\n            error,\n            isLoading,\n            email,\n            password,\n            isShow,\n            isOblige,\n            isLoadingF,\n            isLoadingG\n        } = this.state\n        return (\n            <div className='Connection'>\n                <div className=\"parent-space-between\">\n                    <p><Link className=\"backward-round\" to='/'>Revenir</Link></p>\n                </div>\n\n                <h1 className=\"whiteSpecialTitle\">Rencontre love</h1>\n\n                <div className=\"boxRounded dark-shadow semiOpacity\">\n                    <h2 className=\"whiteSecondTitle centeredText\">Connexion</h2>\n                    <ThemeProvider theme={theme}>\n                        <div\n                            className=\"inline\"\n                            style={{\n                                display: 'flex',\n                                justifyContent: 'space-between',\n                                flex: 1\n                            }}\n                        >\n                            <div style={{ flex: 1, marginRight: 3 }} onClick={() => this.setState({ isLoadingF: true }) }>\n                                <FacebookLogin\n                                    render={e => (\n                                        <Button\n                                            variant=\"contained\"\n                                            color=\"primary\"\n                                            size=\"small\"\n                                            onClick={e.onClick}\n                                            style={{ borderRadius: 30 }}\n                                            startIcon={<img src={Facebook} alt='facebook' style={{ width: 20, height: 20 }} />}\n                                            fullWidth\n                                        >\n                                            {\n                                                isLoadingF\n                                                    ? <Loader\n                                                        size={22}\n                                                        color='#fff'\n                                                        loading={true}\n                                                    />\n                                                    : 'Facebook'\n                                            }\n                                        </Button>\n                                    )}\n                                    autoLoad={false}\n                                    callback={this.onClickFaceboookBtn.bind(this)}\n                                    appId=\"385906195896536\"\n                                />\n                            </div>\n\n                            <div style={{ flex: 1, marginLeft: 3 }} onClick={() => this.setState({ isLoadingG: true }) }>\n                                <GoogleLogin\n                                    render={e => (\n                                        <Button\n                                            variant=\"contained\"\n                                            color=\"secondary\"\n                                            size=\"small\"\n                                            style={{ borderRadius: 30 }}\n                                            onClick={e.onClick}\n                                            startIcon={ <img src={Google} alt='google' style={{ width: 20, height: 20 }}/> }\n                                            fullWidth\n                                        >\n                                            {\n                                                isLoadingG\n                                                    ? <Loader\n                                                        size={22}\n                                                        color='#fff'\n                                                        loading={true}\n                                                    />\n                                                    : 'Google'\n                                            }\n                                        </Button>\n                                    )}\n                                    onSuccess={() => this.onClickGoogleBtn.bind(this)}\n                                    onFailure={this.onClickGoogleBtn.bind(this)}\n                                    cookiePolicy={'single_host_origin'}\n                                    clientId=\"771939562585-noigod9r3l0ddqmh822uki4kmefqvarl.apps.googleusercontent.com\"\n                                />\n                            </div>\n                        </div>\n                    </ThemeProvider>\n                    <h2 style={{ color: '#afb0b2', marginTop: 20 }}>- ou -</h2>\n                    <form className=\"margin-tb-20\" >\n                        <ul className=\"standar-vertic-spacing standar-bottom-spacing\">\n                            <li>\n                                <Grid container spacing={1} alignItems=\"flex-end\">\n                                    <Grid item>\n                                        <Person />\n                                    </Grid>\n                                    <Grid item>\n                                        <TextField\n                                            label=\"Email *\"\n                                            value={email}\n                                            error={isOblige || error}\n                                            onChange={this.onChangeInput.bind(this)}\n                                            // className=\"max-width\"\n                                            name='email'\n                                            style={{ width: 215 }}\n                                        />\n                                    </Grid>\n                                </Grid>\n                            </li>\n                            <li>\n                                <Grid container spacing={1} alignItems=\"flex-end\">\n                                    <Grid item>\n                                        <Https />\n                                    </Grid>\n                                    <Grid item>\n                                        <FormControl>\n                                            <InputLabel htmlFor=\"outlined-adornment-password\">Mot de passe</InputLabel>\n                                            <Input\n                                                type={isShow ? 'text' : 'password'}\n                                                value={password}\n                                                onChange={this.onChangeInput.bind(this)}\n                                                name='password'\n                                                error={isOblige || error}\n                                                endAdornment={\n                                                    <InputAdornment position=\"end\">\n                                                        <IconButton\n                                                            aria-label=\"toggle password visibility\"\n                                                            onClick={() => this.setState({ isShow: !isShow })}\n                                                            onMouseDown={() => this.setState({ isShow: !isShow })}\n                                                            edge=\"end\"\n                                                        >\n                                                            {isShow ? <Visibility /> : <VisibilityOff />}\n                                                        </IconButton>\n                                                    </InputAdornment>\n                                                }\n                                                labelWidth={70}\n                                            />\n                                        </FormControl>\n                                    </Grid>\n                                </Grid>\n                            </li>\n                        </ul>\n                        <p\n                            style={{\n                                textAlign: 'left',\n                                cursor: 'pointer',\n                                marginBottom: 10,\n                                color: '#15c2cf'\n                            }}\n                        >Mot de passe oubli√© ?</p>\n\n                        { /* Button */}\n                        <ul className=\"standar-vertic-spacing\">\n                            <li>\n                                <input\n                                    style={{ cursor: 'pointer' }}\n                                    className=\"max-width btn button-light-blue\"\n                                    type=\"button\"\n                                    value={isLoading ? 'Chargement...' : 'Connexion'}\n                                    onClick={this.onSubmit.bind(this)}\n                                />\n                            </li>\n                            <li>\n                                <input\n                                    style={{ cursor: 'pointer' }}\n                                    className=\"max-width btn btn-light-border-only\"\n                                    type=\"button\"\n                                    value=\"Inscription\"\n                                    onClick={this.onClickPushInscription.bind(this)}\n                                />\n                            </li>\n                        </ul>\n                    </form>\n                </div>\n            </div>\n        )\n    }\n}\n\nexport default Connexion\n"]},"metadata":{},"sourceType":"module"}